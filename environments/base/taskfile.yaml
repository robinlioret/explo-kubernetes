version: "3"

tasks:
  deploy:
    desc: Create a new base environment
    preconditions: []
    status: []
    cmds:
      - task: :init:check-installation
      - task: :brick:kind:deploy-cluster
      # - task: :brick:cert-manager:install
  #      - task: :brick:nginx-ingress-controller:install
  #      - task: :brick:prometheus-stack:install

  tear-down:
    desc: Remove the environment
    preconditions: []
    status: []
    cmds:
      - task: :init:check-installation
      - task: :brick:kind:delete-cluster

  redeploy:
    desc: Remove then recreate the environment
    preconditions: []
    status: []
    cmds:
      - task: tear-down
      - task: deploy
